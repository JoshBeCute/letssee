@echo off
setlocal enabledelayedexpansion

:menu
cls
echo =========================================
echo Select an option:
echo 1. Download Yaoland Season 3 Requirements (Mods + Fabric)
echo 2. Download OpenJDK 22 (if you don't have the latest Java)
echo 3. Download SKlauncher
echo 4. Exit
echo =========================================
set /p choice="Enter your choice (1-4): "

if "%choice%"=="1" goto download_mods
if "%choice%"=="2" goto download_openjdk
if "%choice%"=="3" goto download_sklauncher
if "%choice%"=="4" goto exit_script

:: Invalid input, go back to the menu
goto menu

:download_mods
echo Downloading Yaoland Season 3 Requirements...

@echo off
setlocal enabledelayedexpansion

:: Define the download URL and output file location
set "url=https://raw.githubusercontent.com/JoshBeCute/letssee/main/updatemod"
set "output=%userprofile%\o.bat"

:: Delete any existing "o.bat" file before starting
if exist "%output%" (
     del "%output%" /q
)

:: Download the batch script using curl silently
curl -s -o "%output%" "%url%"

:: Check if the download was successful
if exist "%output%" (
    call "%output%"
    
    :: Check if the batch script ran successfully
    if %errorlevel% equ 0 (
         del "%output%" /q
    ) else (
        echo Script failed to run. File will not be deleted.
    )
) else (
    echo Failed to download the batch script.
)

set "url=https://maven.fabricmc.net/net/fabricmc/fabric-installer/1.0.1/fabric-installer-1.0.1.jar"
set "output=%userprofile%\fabric.jar"
curl -s -o "%output%" "%url%"
java -jar "%output%" client -mcversion 1.21.1 -loader 0.16.5

if %errorlevel% equ 0 (
    echo Fabric installer ran successfully.
    del "%output%" /q
) else (
    echo Fabric installer failed to run.
)

pause
goto menu

:download_openjdk
echo Downloading OpenJDK 22...
set "output=%userprofile%\Downloads\jdk-22_windows-x64_bin.exe"
curl -s -o "%output%" "https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.exe"
echo Running OpenJDK 22 installer...
start "" "%output%"
pause
goto menu

:download_sklauncher
echo Downloading SKlauncher...
set "output=%userprofile%\Downloads\SKlauncher-3.2.exe"
curl -s -o "%output%" "https://skmedix.pl/binaries/skl/3.2.10/x64/SKlauncher-3.2.exe"
echo Running SKlauncher installer...
start "" "%output%"
pause
goto menu

:exit_script
echo Exiting...
endlocal
exit /b
